<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Mindful Analytics</title>
<link>https://seheeopark.rbind.io/</link>
<atom:link href="https://seheeopark.rbind.io/index.xml" rel="self" type="application/rss+xml"/>
<description>사려 깊은 데이터 분석 이야기</description>
<generator>quarto-1.4.550</generator>
<lastBuildDate>Wed, 13 Mar 2024 15:00:00 GMT</lastBuildDate>
<item>
  <title>Quarto 블로그 SEO 최적화 3가지 꿀팁</title>
  <dc:creator>박세희 </dc:creator>
  <link>https://seheeopark.rbind.io/posts/quarto-blog-seo-setting/</link>
  <description><![CDATA[ 





<section id="서치콘솔에-홈페이지-등록" class="level2">
<h2 class="anchored" data-anchor-id="서치콘솔에-홈페이지-등록">1. 서치콘솔에 홈페이지 등록</h2>
<p>구글 검색 시스템에서 내가 작성한 블로그 글이 누락되지 않도록 하려면 <code>구글 서치 콘솔</code>에 홈페이지를 등록해야 합니다.</p>
<p><a href="https://search.google.com/search-console">구글 서치 콘솔</a>에 접속 합니다.</p>
<p><strong>속성 추가</strong> 버튼을 눌러서 내 홈페이지를 등록 합니다. 도메인을 구매하여 DNS 정보가 있다면 <code>도메인(신규)</code> 옵션을 선택합니다. 이 블로그 처럼 Netlify, rbind.io 등 직접 구매하지 않은 도메인으로 DNS 관리 정보가 없는 경우는 <code>URL 접두어</code>옵션에서 홈페이지 주소를 입력 합니다.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="search-console-URL-submit.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" data-glightbox="description: .lightbox-desc-1" title="구글 서치콘솔에서 홈페이지 등록하기"><img src="https://seheeopark.rbind.io/posts/quarto-blog-seo-setting/search-console-URL-submit.png" class="img-fluid figure-img" alt="구글 서치콘솔에서 홈페이지 등록하기"></a></p>
<figcaption>구글 서치콘솔에서 홈페이지 등록하기</figcaption>
</figure>
</div>
</section>
<section id="사이트맵-제출" class="level2">
<h2 class="anchored" data-anchor-id="사이트맵-제출">2. 사이트맵 제출</h2>
<section id="사이트맵-생성하기" class="level3">
<h3 class="anchored" data-anchor-id="사이트맵-생성하기">(1) 사이트맵 생성하기</h3>
<p>Quarto 블로그는 자동으로 사이트맵을 생성해주지 않기 때문에, yaml에 사이트맵을 추가하는 옵션을 넣어 주어야 합니다.</p>
<p>수정해야 하는 파일은 <code>_quarto.yml</code>입니다.</p>
<p>이 블로그 사이트를 예시로 설명 드리겠습니다. 아래에는 이 블로그를 만들기 위한 <code>_quarto.yml</code> 파일 중 일부를 발췌해서 보여 드리고 있습니다.</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb1-1"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">project</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">:</span></span>
<span id="cb1-3"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">type</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> website</span></span>
<span id="cb1-4"></span>
<span id="cb1-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">website</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">:</span></span>
<span id="cb1-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">title</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Mindful Analytics"</span></span>
<span id="cb1-7"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span></code></pre></div>
<p><code>_quarto.yml</code> 파일에 다음과 같이 2줄을 추가해서 <code>sitemap</code>을 만들 수 있습니다.</p>
<ul>
<li><p>website 옵션 아래 site-url: “내 웹사이트 주소”를 추가합니다.</p></li>
<li><p>site-path: “/”는 사이트맵이 생성될 경로를 의미합니다.</p></li>
</ul>
<p>아래 옵션으로 추가되는 파일은 <code>_site</code> 폴더 안에 <code>sitemap.xml</code> 파일입니다. 해당 xml 파일은 site-path에서 “/”다음에 넣으라고 지정했기 때문에 홈페이지주소/사이트맵 형태로 추가됩니다. 이 블로그의 사이트맵은 다음 위치에 있습니다. https://seheeopark.rbind.io/sitemap.xml</p>
<div class="sourceCode" id="annotated-cell-2" style="background: #f1f3f5;"><pre class="sourceCode yaml code-annotation-code code-with-copy code-annotated"><code class="sourceCode yaml"><span id="annotated-cell-2-1"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span>
<span id="annotated-cell-2-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">project</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">:</span></span>
<span id="annotated-cell-2-3"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">type</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> website</span></span>
<span id="annotated-cell-2-4"></span>
<span id="annotated-cell-2-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">website</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">:</span></span>
<span id="annotated-cell-2-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">title</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Mindful Analytics"</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-2-7" class="code-annotation-target"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">site-url</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://seheeopark.rbind.io"</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-2-8" class="code-annotation-target"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">site-path</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/"</span></span>
<span id="annotated-cell-2-9"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code></pre></div>
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-2" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="7" data-code-annotation="1">사이트 주소를 입력합니다.</span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="8" data-code-annotation="2">사이트맵이 생성될 경로를 지정합니다.</span>
</dd>
</dl>
<p>사이트맵을 만드는 yaml을 저장한 다음 블로그를 새로 render 해야 <code>sitemap.xml</code> 파일이 생성됩니다. <code>_site</code> 폴더 안에 <code>sitemap.xml</code> 파일을 확인해서 최신 홈페이지 구성으로 사이트맵이 잘 생성되었는지 확인할 수 있습니다.</p>
</section>
<section id="사이트맵-제출하기" class="level3">
<h3 class="anchored" data-anchor-id="사이트맵-제출하기">(2) 사이트맵 제출하기</h3>
<p>내 홈페이지가 등록된 구글 서치콘솔의 <strong>색인생성 &gt; Sitemaps</strong> 메뉴에서 사이트맵을 추가합니다. 사이트맵이 위치한 경로는 Quarto yaml에서 지정한 경로와 동일합니다. 사이트맵 등록 방법은 다음 동영상을 참고해 주세요.</p>
<div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/AHeXaQ9O9RY" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
</section>
</section>
<section id="메타설명-추가" class="level2">
<h2 class="anchored" data-anchor-id="메타설명-추가">3. 메타설명 추가</h2>
<p>Quarto 블로그는 <code>metadata</code>를 추가하여 블로그 글의 검색 엔진 최적화를 할 수 있습니다. 가장 손쉽게 구글 서치 엔진에 정보를 제공하는 방법은 각 블로그 포스팅 마다 <code>description</code>을 추가하는 것 입니다.</p>
<p><code>description</code>은 블로그 글의 요약된 정보를 의미합니다. 구글 검색 시스템은 html 메타정보에서 <code>description</code>을 우선 읽어 들여, 사용자에게 찾는 정보에 근접한 페이지를 노출합니다. 따라서 이 <code>description</code>을 <strong>블로그 글을 정확히 요약</strong>하여 전달하도록 작성함으로써 검색 상위 노출 효과를 노릴 수 있습니다.</p>
<p>구글에서는 <strong>우수한 메타 설명을 만드는 권장사항</strong>을 다음과 같이 제시하고 있습니다.</p>
<ul>
<li>각 페이지마다 고유한 설명을 작성합니다.</li>
<li>페이지의 주요 내용을 요약합니다.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="구글_메타설명_권장사항.webp" class="lightbox" data-gallery="quarto-lightbox-gallery-2" data-glightbox="description: .lightbox-desc-2" title="구글 메타설명 권장사항 예시"><img src="https://seheeopark.rbind.io/posts/quarto-blog-seo-setting/구글_메타설명_권장사항.webp" class="img-fluid figure-img" alt="구글 메타설명 권장사항 예시"></a></p>
<figcaption>구글 메타설명 권장사항 예시</figcaption>
</figure>
</div>
<p>더 자세한 구글 권장사항은 <a href="https://developers.google.com/search/docs/appearance/snippet?hl=ko">여기</a>에서 확인할 수 있습니다.</p>
<p>이 블로그 글의 <code>description</code>은 다음과 같이 추가되어 있습니다.</p>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb2-1"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span>
<span id="cb2-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">title</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Quarto 블로그 SEO 최적화"</span></span>
<span id="cb2-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">description</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Quarto로 만드는 블로그 구글 검색 상위 노출을 위한 SEO 최적화를 위해 서치콘솔 등록, 사이트맵 제출, 메타설명 추가 방법을 다룹니다."</span></span>
<span id="cb2-4"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span></code></pre></div>
<hr>
<p>여러분이 열심히 작성한 Quarto 블로그가 구글 검색에 누락되지 않도록, 오늘 소개해 드린 3가지 SEO 세팅은 꼭 신경써서 등록하시길 바랍니다.</p>



</section>

 ]]></description>
  <category>featured</category>
  <category>quarto</category>
  <category>R</category>
  <category>seo</category>
  <guid>https://seheeopark.rbind.io/posts/quarto-blog-seo-setting/</guid>
  <pubDate>Wed, 13 Mar 2024 15:00:00 GMT</pubDate>
  <media:content url="https://seheeopark.rbind.io/posts/quarto-blog-seo-setting/seo-thumbnail.webp" medium="image" type="image/webp"/>
</item>
<item>
  <title>dbplyr로 bigquery 데이터 추출하기</title>
  <dc:creator>박세희 </dc:creator>
  <link>https://seheeopark.rbind.io/posts/bigquery-dbplyr/</link>
  <description><![CDATA[ 





<div class="callout callout-style-default callout-tip callout-titled" title="누가, 언제 읽으면 좋을까?">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
누가, 언제 읽으면 좋을까?
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>tidyverse 문법에 익숙한 R 사용자가<br>
</li>
<li>SQL 구문을 사용하지 않고 빅쿼리 데이터를 추출하고 싶을 때<br>
</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="이 글에서 다루지 않는 내용">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
이 글에서 다루지 않는 내용
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><a href="https://seheeopark.rbind.io/posts/bigquery-r/bigquery-r">R에서 구글빅쿼리 데이터 추출하기</a></li>
</ul>
</div>
</div>
<section id="dbplyr-소개" class="level2">
<h2 class="anchored" data-anchor-id="dbplyr-소개">1. dbplyr 소개</h2>
<p><a href="https://dbplyr.tidyverse.org">dbplyr</a>은 tidyverse 패키지 중 하나로, <strong>데이터베이스에서 데이터를 추출</strong>하는 패키지입니다. dbplyr은 R사용자에게 익숙한 dplyr 문법으로 사용하여 *SQL을 사용하지 않고도 데이터베이스에서 데이터를 추출할 수 있게 해 줍니다.</p>
<p>dbplyr 패키지에서 가장 많이 활용되는 함수는 <code>tbl()</code> 함수로, 데이터베이스에서 테이블을 불러올 때 사용합니다. <code>tbl()</code> 함수를 사용하면 데이터베이스에서 테이블을 불러올 때 사용하는 SQL문을 사용하지 않고도 데이터를 불러올 수 있습니다.</p>
<section id="사용-패키지-설치" class="level3">
<h3 class="anchored" data-anchor-id="사용-패키지-설치">(1) 사용 패키지 설치</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># dbplyr을 포함한 tidyverse 패키지를 설치하고 실행합니다. </span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tidyverse"</span>)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb1-4"></span>
<span id="cb1-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 구글빅쿼리 접속을 위한 bigrquery 패키지를 설치하고 실행합니다.</span></span>
<span id="cb1-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bigrquery"</span>)</span>
<span id="cb1-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(bigrquery)</span></code></pre></div>
</div>
</section>
<section id="빅쿼리-계정-연결하기" class="level3">
<h3 class="anchored" data-anchor-id="빅쿼리-계정-연결하기">(2) 빅쿼리 계정 연결하기</h3>
<p>구글 빅쿼리에 접속하여 이 글에서 사용하는 공개 데이터셋을 활용하려면 빅쿼리 계정이 필요합니다. 빅쿼리 계정 설정 방법은 <a href="https://seheeopark.rbind.io/posts/bigquery-r/bigquery-r">‘R에서 구글빅쿼리 데이터 추출하기’</a>를 참고하세요. 계정 설정이 끝났다면 아래 코드를 실행하여 빅쿼리 접속 권한을 설정합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 계정 연결하기 </span></span>
<span id="cb2-2">bigrquery<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bq_auth</span>()</span></code></pre></div>
</div>
</section>
<section id="데이터베이스-연결하기" class="level3">
<h3 class="anchored" data-anchor-id="데이터베이스-연결하기">(3) 데이터베이스 연결하기</h3>
<p><code>bigrquery</code> 패키지를 사용하여 구글 빅쿼리에 연결합니다. 연결을 위해서는 <code>dbConnect()</code> 함수를 사용합니다.</p>
<p>빅쿼리 계정이 준비되었다면, <code>dbConnect()</code> 함수를 사용하여 데이터베이스에 연결합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 데이터베이스 연결하기 </span></span>
<span id="cb3-2">con <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> DBI<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dbConnect</span>(</span>
<span id="cb3-3">  bigrquery<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bigquery</span>(),</span>
<span id="cb3-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">project =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bigquery-public-data"</span>,</span>
<span id="cb3-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dataset =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"samples"</span>,</span>
<span id="cb3-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">billing =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"여기에 본인 계정 프로젝트 이름을 넣습니다"</span></span>
<span id="cb3-7">)</span></code></pre></div>
</div>
<p>데이터베이스 연결이 성공하면 <code>con</code> 객체에 데이터베이스 연결 정보가 저장됩니다. 연결이 되었다면, 다음 이미지처럼 RStudio &gt; Connections 탭에서 연결된 데이터베이스가 갖고 있는 테이블 정보를 확인할 수 있습니다.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="bigquery_publicdata_con.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" data-glightbox="description: .lightbox-desc-1" title="빅쿼리 공개데이터 테이블셋 리스트"><img src="https://seheeopark.rbind.io/posts/bigquery-dbplyr/bigquery_publicdata_con.png" class="img-fluid figure-img" alt="빅쿼리 공개데이터 테이블셋 리스트"></a></p>
<figcaption>빅쿼리 공개데이터 테이블셋 리스트</figcaption>
</figure>
</div>
<p>이 글에서는 <code>shakespeare</code> 테이블을 사용하겠습니다.</p>
</section>
<section id="테이블-불러오기" class="level3">
<h3 class="anchored" data-anchor-id="테이블-불러오기">(4) 테이블 불러오기</h3>
<p><code>tbl()</code> 함수를 사용하여 데이터베이스에서 테이블을 불러올 수 있습니다. <code>shakespeare</code> 테이블을 불러 오겠습니다. 이 때 테이블 데이터가 실제 다운로드 되지 않고, 데이터베이스에 있는 테이블 메타 정보만을 불러옵니다. 이렇게 <code>tbl()</code> 함수를 사용하여 데이터 정보를 보는 것은 데이터 다운로드 비용 발생 없이 테이블 내용을 살펴보기 용이한 빅쿼리 활용 방법입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 테이블 불러오기    </span></span>
<span id="cb4-2">db_table <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tbl</span>(con, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"shakespeare"</span>)</span>
<span id="cb4-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">class</span>(db_table)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="bg-gray"><code>[1] "tbl_BigQueryConnection" "tbl_dbi"                "tbl_sql"               
[4] "tbl_lazy"               "tbl"                   </code></pre>
</div>
</div>
<p>실행된 결과를 보면 <code>db_table</code> 객체는 <code>tbl_lazy</code> 클래스로 정의되어 있습니다. 이는 데이터가 실제로 다운로드 되지 않았다는 것을 의미합니다. 이 상태에서 테이블 열 정보를 확인할 수 있습니다.</p>
<p>이제 샘플 데이터가 준비되었으니 <code>dbplyr</code> 패키지와 <code>dplyr</code> 문법을 사용하여 데이터를 추출해 보겠습니다.</p>
</section>
</section>
<section id="dbplyr로-bigquery-데이터-추출하기" class="level2">
<h2 class="anchored" data-anchor-id="dbplyr로-bigquery-데이터-추출하기">2. dbplyr로 bigquery 데이터 추출하기</h2>
<p><code>shakespeare</code> 데이터 정보가 저장된 <code>db_table</code> 객체를 사용하여 <code>dbplyr</code> 패키지를 활용하여 데이터를 추출해 보겠습니다.</p>
<section id="dplyr-문법으로-테이블-요약하기" class="level3">
<h3 class="anchored" data-anchor-id="dplyr-문법으로-테이블-요약하기">(1) dplyr 문법으로 테이블 요약하기</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 테이블 열 정보 확인하기</span></span>
<span id="cb6-2">db_table <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glimpse</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="bg-gray"><code>Rows: ??
Columns: 4
Database: BigQueryConnection
$ word        &lt;chr&gt; "LVII", "augurs", "dimm'd", "plagues", "treason", "surmise…
$ word_count  &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
$ corpus      &lt;chr&gt; "sonnets", "sonnets", "sonnets", "sonnets", "sonnets", "so…
$ corpus_date &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…</code></pre>
</div>
</div>
<p>실행된 결과를 보면 <code>db_table</code> 테이블에는 4개의 열이 있습니다. 아직 전체 데이터 다운로드가 실행되지 않았기 대문에 행 갯수는 <code>??</code>으로 표시됩니다.</p>
</section>
<section id="dplyr-문법으로-테이블-조작-쿼리-작성하기" class="level3">
<h3 class="anchored" data-anchor-id="dplyr-문법으로-테이블-조작-쿼리-작성하기">(2) dplyr 문법으로 테이블 조작 쿼리 작성하기</h3>
<p><code>dplyr</code> 패키지를 사용해서 tibble 형태 데이터를 조작하듯 쿼리를 작성할 수 있습니다. 쿼리를 작성하는 것은 실제 데이터를 추출하는 것이 아닙니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># shakespeare 테이블에서 작품별로 사용된 단어 수를 계산합니다.</span></span>
<span id="cb8-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 단어 수가 가장 많은 상위 10개 단어를 추출합니다. </span></span>
<span id="cb8-3">word_count_query <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> db_table <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb8-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(word) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb8-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">count =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>()) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb8-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(count)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb8-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span></code></pre></div>
</div>
<p>dbplyr로 작성한 쿼리를 SQL로 확인하고 싶다면 <code>show_query()</code> 함수를 사용합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># SQL 쿼리 확인하기</span></span>
<span id="cb9-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">show_query</span>(word_count_query)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="bg-gray"><code>&lt;SQL&gt;
SELECT `word`, count(*) AS `count`
FROM `shakespeare`
GROUP BY `word`
ORDER BY `count` DESC
LIMIT 10</code></pre>
</div>
</div>
<p>이렇게 SQL 문법을 몰라도 dplyr 문법을 사용하여 SQL 쿼리를 작성할 수 있음을 확인할 수 있습니다.</p>
</section>
<section id="데이터-추출하기" class="level3">
<h3 class="anchored" data-anchor-id="데이터-추출하기">(3) 데이터 추출하기</h3>
<p><code>collect()</code> 함수를 사용하여 실제 데이터를 추출합니다. <code>collect()</code> 함수를 실행하는 것으로 실제 비용이 발생하게 됩니다. 이 쿼리를 실행하는 경우 10.49MB 데이터를 다운로드 하게 됩니다. 빅쿼리에서는 월 1TB를 무료로 제공하고 있어, 이 글에서 진행하는 실습으로는 추가 비용을 부담하지 않습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 데이터 추출하기</span></span>
<span id="cb11-2">word_count <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">collect</span>(word_count_query)</span></code></pre></div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="word_count_size.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2" data-glightbox="description: .lightbox-desc-2" title="collect() 함수 실행 시 다운로드하는 데이터 크기"><img src="https://seheeopark.rbind.io/posts/bigquery-dbplyr/word_count_size.png" class="img-fluid figure-img" alt="collect() 함수 실행 시 다운로드하는 데이터 크기"></a></p>
<figcaption>collect() 함수 실행 시 다운로드하는 데이터 크기</figcaption>
</figure>
</div>
</section>
<section id="데이터-확인하기" class="level3">
<h3 class="anchored" data-anchor-id="데이터-확인하기">(4) 데이터 확인하기</h3>
<p>셰익스피어 테이블에서 가장 많이 사용된 단어 10개를 추출한 결과를 확인합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 데이터 확인하기</span></span>
<span id="cb12-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(word_count)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="bg-gray"><code># A tibble: 10 × 2
   word     count
   &lt;chr&gt;    &lt;int&gt;
 1 She         42
 2 comes       42
 3 thousand    42
 4 fall        42
 5 late        42
 6 hard        42
 7 us          42
 8 himself     42
 9 There       42
10 last        42</code></pre>
</div>
</div>
</section>
<section id="데이터베이스-연결-끊기" class="level3">
<h3 class="anchored" data-anchor-id="데이터베이스-연결-끊기">(5) 데이터베이스 연결 끊기</h3>
<p>데이터 추출이 완료 되었다면 다음 명령을 실행하여 빅쿼리 데이터베이스와 연결을 끊습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 데이터베이스 연결 끊기</span></span>
<span id="cb14-2">DBI<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dbDisconnect</span>(con)</span></code></pre></div>
</div>
</section>
</section>
<section id="마무리" class="level2">
<h2 class="anchored" data-anchor-id="마무리">3. 마무리</h2>
<p>이렇게 데이터베이스에 대한 지식이 부족한 R 사용자에게 유용한 패키지 <code>dbplyr</code>를 소개해 드렸습니다. <code>dbplyr</code> 패키지를 사용하여 SQL을 사용하지 않고도 빅쿼리 데이터를 추출할 수 있습니다. 빅쿼리에 저장된 데이터가 너무 많아서 간단하게 데이터 형태를 살펴보고 요약해 보고 싶다면 전체 데이터를 다운로드하지 않아도 되기 때문에 시간과 비용이 크게 절감되니 꼭 활용해 보시기 바랍니다.</p>



</section>

 ]]></description>
  <category>featured</category>
  <category>bigquery</category>
  <category>R</category>
  <category>dbplyr</category>
  <category>sql</category>
  <guid>https://seheeopark.rbind.io/posts/bigquery-dbplyr/</guid>
  <pubDate>Wed, 13 Mar 2024 15:00:00 GMT</pubDate>
  <media:content url="https://seheeopark.rbind.io/posts/bigquery-dbplyr/dbplyr_thumbnail.png" medium="image" type="image/png" height="81" width="144"/>
</item>
<item>
  <title>R에서 구글빅쿼리 데이터 추출하기</title>
  <dc:creator>박세희 </dc:creator>
  <link>https://seheeopark.rbind.io/posts/bigquery-r/</link>
  <description><![CDATA[ 





<div class="callout callout-style-default callout-tip callout-titled" title="언제 읽으면 좋을까?">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
언제 읽으면 좋을까?
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>구글빅쿼리 데이터를 RStudio에서 받아오고 싶을 때<br>
</li>
<li>구글빅쿼리와 RStudio 연결 방법을 모를 때<br>
</li>
<li>bigrquery 패키지 사용법을 알고 싶을 때<br>
</li>
</ul>
</div>
</div>
<section id="구글-빅쿼리bigquery란" class="level2">
<h2 class="anchored" data-anchor-id="구글-빅쿼리bigquery란">1. 구글 빅쿼리(BigQuery)란?</h2>
<p>구글 빅쿼리는 대용량 데이터를 효율적으로 처리하고 분석할 수 있도록 구글에서 제공하는 온라인 데이터베이스 서비스 입니다. 특히 온라인 고객 행동을 모니터링하기 위해 사용하는 <strong>GA4(구글애널리틱스4) 데이터를 빅쿼리로 바로 연동</strong>하도록 설계되어 있습니다. 이 때문에 GA4 데이터 분석에서는 빅쿼리 사용 점점 늘어나고 있기도 합니다.</p>
<p>빅쿼리는 많은 양의 데이터를 온라인에서 분석할 수 있도록 쥬피터노트북과 연계되어 있기 때문에 <strong>데이터를 다운로드 하는 것 보다는 온라인에서 직접 분석하는 게 더 효율적일 수 있습니다.</strong> 그럼에도 불구하고 데이터를 다운로드 받아서 로컬에서 분석해야 하는 경우, <code>bigrquery</code> 패키지를 활용하여 데이터를 다운로드 할 수도 있습니다.</p>
</section>
<section id="빅쿼리-시작하기" class="level2">
<h2 class="anchored" data-anchor-id="빅쿼리-시작하기">2. 빅쿼리 시작하기</h2>
<div class="callout callout-style-default callout-warning callout-titled" title="빅쿼리 설정 먼저">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
빅쿼리 설정 먼저
</div>
</div>
<div class="callout-body-container callout-body">
<p>구글 빅쿼리에 계정과 데이터를 추가한 뒤에 R에서 연결합니다.<br>
* 계정 만들기<br>
* 계정에 공개 데이터셋 추가하기</p>
</div>
</div>
<section id="빅쿼리-계정-만들기" class="level3">
<h3 class="anchored" data-anchor-id="빅쿼리-계정-만들기">(1) 빅쿼리 계정 만들기</h3>
<p><a href="https://cloud.google.com/bigquery?hl=ko">빅쿼리 홈페이지</a>를 방문하여 본인의 구글 계정에서 빅쿼리를 사용할 수 있도록 가입합니다. 빅쿼리 시작 시에는 무료이며, 300$의 무료 크레딧이 제공됩니다. 데이터를 불러올 때 용량에 따라 크레딧이 차감되고, 크레딧을 소진하는 경우 추가 비용이 발생할 수 있습니다.</p>
<p>빅쿼리 계정을 만들면 <code>콘솔</code>(대시보드)가 생성됩니다.</p>
</section>
<section id="빅쿼리-계정에-공개-데이터셋-추가하기" class="level3">
<h3 class="anchored" data-anchor-id="빅쿼리-계정에-공개-데이터셋-추가하기">(2) 빅쿼리 계정에 공개 데이터셋 추가하기</h3>
<p><code>bigrquery</code> 설치 후 예제를 수행하기 위해서는 본인의 구글 계정에 테스트용 공개 데이터셋를 먼저 추가해야 합니다. 추가하는 방법은 다음과 같습니다.</p>
<ul>
<li>빅쿼리 콘솔 &gt; 탐색기(Explorer) &gt; <code>+추가</code> 버튼 클릭<br>
</li>
<li>새 창에서 “public data”로 검색 &gt; Public datasets 선택<br>
</li>
<li>필터에서 분석, 데이터, 무료 선택 &gt; ‘Google’s diversity annual report data’ 선택: 이 때 무엇을 선택해도 상관없이 나의 데이터 목록에 <code>bigquery-public-data</code> 프로젝트가 추가 됩니다.<br>
</li>
<li><code>bigquery-public-data</code> 프로젝트를 클릭하면 수 많은 데이터 목록이 보이는데, 그 중에 “samples”라는 데이터셋을 테스트 하겠습니다.</li>
</ul>
<div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/Nu-9Myq1UCE" title="빅쿼리 공개데이터 추가" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
</section>
<section id="빅쿼리-데이터-구조" class="level3">
<h3 class="anchored" data-anchor-id="빅쿼리-데이터-구조">(3) 빅쿼리 데이터 구조</h3>
<p>빅쿼리는 <strong>프로젝트 &gt; 데이터셋 &gt; 테이블</strong> 3단 구조로 설계되어 있습니다. 분석용 데이터는 <code>테이블</code>에 저장되어 있습니다. 우리에게 친숙한 엑셀과 비교하자면, 데이터셋은 파일, 테이블은 시트와 유사한 구조입니다.</p>
<p>빅쿼리 접속할 경우에 이 3가지 정보를 정확히 입력해야 원하는 데이터를 받을 수 있습니다.</p>
</section>
</section>
<section id="bigrquery-패키지-활용법" class="level2">
<h2 class="anchored" data-anchor-id="bigrquery-패키지-활용법">3. bigrquery 패키지 활용법</h2>
<p><code>bigrquery</code> 패키지는 가벼운 API 연동으로 빅쿼리에 저장된 데이터 정보(메타데이터)를 빠르게 받아올 수 있습니다.</p>
<section id="패키지-설치하기" class="level3">
<h3 class="anchored" data-anchor-id="패키지-설치하기">(1) 패키지 설치하기</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bigrquery"</span>)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(bigrquery)</span></code></pre></div>
</div>
</section>
<section id="계정-인증" class="level3">
<h3 class="anchored" data-anchor-id="계정-인증">(2) 계정 인증</h3>
<p>다음 명령을 실행하면 웹 브라우저가 열리면서 구글 계정에 로그인하도록 안내가 됩니다. 계정 연결은 최초 1회만 필요합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">bigrquery<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bq_auth</span>()</span></code></pre></div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="bq_auth_web.webp" class="lightbox" data-gallery="quarto-lightbox-gallery-1" data-glightbox="description: .lightbox-desc-1" title="빅쿼리 계정 인증 필요"><img src="https://seheeopark.rbind.io/posts/bigquery-r/bq_auth_web.webp" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%" alt="빅쿼리 계정 인증 필요"></a></p>
<figcaption>빅쿼리 계정 인증 필요</figcaption>
</figure>
</div>
</section>
<section id="공개-데이터셋-정보-확인" class="level3">
<h3 class="anchored" data-anchor-id="공개-데이터셋-정보-확인">(3) 공개 데이터셋 정보 확인</h3>
<p>공개 데이터셋 정보는 다음과 같습니다.</p>
<ul>
<li>프로젝트: “bigquery-public-data”<br>
</li>
<li>데이터셋: “samples”</li>
</ul>
<p>데이터셋 안에 어떤 테이블이 존재하는지 모를 경우, <code>bq_dataset("프로젝트명", "데이터셋명")</code> 명령을 실행하여 확인 합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">ds_sample <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> bigrquery<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bq_dataset</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bigquery-public-data"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"samples"</span>)</span>
<span id="cb3-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(ds_sample)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="bg-gray"><code>&lt;bq_dataset&gt; bigquery-public-data.samples</code></pre>
</div>
</div>
<p>데이터에 관한 정보, 즉 메타데이터를 추출하기 때문에 <strong>“프로젝트명.데이터셋명”</strong>으로 정의된 데이터가 있다고 확인 메세지를 출력합니다.</p>
<p>데이터셋에 어떤 테이블이 들어 있는지 확인하려면, <code>bq_dataset_tables("프로젝트명", "데이터셋명")</code> 명령을 실행 합니다. 여기서는 해당 정보를 <code>ds_samples_tables</code> 변수에 저장합니다.</p>
<p><code>ds_samples_tables</code>에서 메타데이터 정보를 추출하면 총 7개의 테이블이 있는 것을 알 수 있습니다. 구글 빅쿼리 홈페이지에서 확인했던 7개 테이블과 동일한 정보 입니다.</p>
<p>테이블 이름은 <strong>“프로젝트.데이터셋.테이블”</strong>으로 표시됩니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">ds_samples_tables <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> bigrquery<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bq_dataset_tables</span>(ds_sample) </span>
<span id="cb5-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(ds_samples_tables)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="bg-gray"><code>[[1]]
&lt;bq_table&gt; bigquery-public-data.samples.github_nested

[[2]]
&lt;bq_table&gt; bigquery-public-data.samples.github_timeline

[[3]]
&lt;bq_table&gt; bigquery-public-data.samples.gsod

[[4]]
&lt;bq_table&gt; bigquery-public-data.samples.natality

[[5]]
&lt;bq_table&gt; bigquery-public-data.samples.shakespeare

[[6]]
&lt;bq_table&gt; bigquery-public-data.samples.trigrams

[[7]]
&lt;bq_table&gt; bigquery-public-data.samples.wikipedia</code></pre>
</div>
</div>
</section>
<section id="분석-데이터-선택" class="level3">
<h3 class="anchored" data-anchor-id="분석-데이터-선택">(4) 분석 데이터 선택</h3>
<p>7개 테이블 중 <code>natality</code> 테이블을 선택합니다. <code>bq_table(프로젝트, 데이터셋, 테이블)</code> 명령을 실행하면 해당 테이블에 대한 메타 정보를 출력합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">natality <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> bigrquery<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bq_table</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bigquery-public-data"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"samples"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"natality"</span>)</span>
<span id="cb7-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(natality)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="bg-gray"><code>&lt;bq_table&gt; bigquery-public-data.samples.natality</code></pre>
</div>
</div>
</section>
<section id="빅쿼리-비용-주의사항" class="level3">
<h3 class="anchored" data-anchor-id="빅쿼리-비용-주의사항">(5) 빅쿼리 비용 주의사항</h3>
<p>메타데이터는 실제 해당 테이블이 가지고 있는 데이터를 포함하지 않고 단순히 어떤 프로젝트, 데이터셋, 테이블 인지를 정의한 정보 입니다. 데이터를 출력하려면 <code>bq_table_download()</code>를 사용합니다. 이 때 서버에 얼마나 많은 양의 데이터가 있는지 알 수 없기 때문에 <strong>모든 데이터를 출력하지 않아야 합니다.</strong> 자칫 실수로 전체 데이터를 받을 경우 과도한 비용과 서버 과부하가 발생합니다.</p>
<p>또한 빅쿼리는 데이터를 “열(column)”을 기준으로 저장합니다. 따라서 열을 조회하는 순간 행(row) 갯수와 관계없이 비용이 부과됩니다.</p>
<p>빅쿼리는 데이터 저장 비용은 매우 저렴하지만, 데이터를 조회(SELECT)하거나 추출할 때 비용이 발생하기 때문에 <code>sql</code> 쿼리 설계를 잘 해야 운영 비용이 적게 발생합니다.</p>
<p>따라서 다음과 같이 테이블이 가진 첫 6개 행을 출력하는 것은 비용 절감에 도움이 되지 않습니다.</p>
<p><strong>첫 6개행 출력하기</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">natality_df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> bigrquery<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bq_table_download</span>(natality, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n_max =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>)</span>
<span id="cb9-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(natality_df)</span></code></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="reactable html-widget html-fill-item" id="htmlwidget-8722f79c4d3c42c8524b" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-8722f79c4d3c42c8524b">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"source_year":[2005,2005,2005,2005,2005,2005],"year":[2005,2005,2005,2005,2005,2005],"month":[1,2,5,8,5,5],"day":["NA","NA","NA","NA","NA","NA"],"wday":[3,7,4,4,6,4],"state":[null,null,null,null,null,null],"is_male":[true,false,false,false,true,false],"child_race":["NA","NA","NA","NA","NA","NA"],"weight_pounds":[7.8043640748,5.37486994756,6.4374980504,6.56095691712,8.81187661214,6.12444163836],"plurality":[1,2,1,1,1,1],"apgar_1min":["NA","NA","NA","NA","NA","NA"],"apgar_5min":["NA",8,7,9,9,"NA"],"mother_residence_state":[null,null,null,null,null,null],"mother_race":[38,1,"NA","NA","NA",7],"mother_age":[30,29,24,26,22,28],"gestation_weeks":[40,38,39,"NA",40,39],"lmp":["04172004","05992004","99999999","99999999","99999999","08112004"],"mother_married":[true,true,true,false,false,true],"mother_birth_state":[null,null,null,null,null,null],"cigarette_use":[null,false,null,null,null,null],"cigarettes_per_day":["NA","NA","NA","NA","NA","NA"],"alcohol_use":[null,false,null,null,null,null],"drinks_per_week":["NA","NA","NA","NA","NA","NA"],"weight_gain_pounds":[99,8,99,25,99,99],"born_alive_alive":[5,9,"NA","NA","NA",0],"born_alive_dead":[2,0,"NA","NA","NA",0],"born_dead":[1,0,"NA","NA","NA",0],"ever_born":[8,10,"NA","NA","NA",1],"father_race":[38,1,"NA","NA","NA",7],"father_age":[24,31,31,99,33,33],"record_weight":[1,1,1,1,1,1]},"columns":[{"id":"source_year","name":"source_year","type":"numeric"},{"id":"year","name":"year","type":"numeric"},{"id":"month","name":"month","type":"numeric"},{"id":"day","name":"day","type":"numeric"},{"id":"wday","name":"wday","type":"numeric"},{"id":"state","name":"state","type":"character"},{"id":"is_male","name":"is_male","type":"logical"},{"id":"child_race","name":"child_race","type":"numeric"},{"id":"weight_pounds","name":"weight_pounds","type":"numeric"},{"id":"plurality","name":"plurality","type":"numeric"},{"id":"apgar_1min","name":"apgar_1min","type":"numeric"},{"id":"apgar_5min","name":"apgar_5min","type":"numeric"},{"id":"mother_residence_state","name":"mother_residence_state","type":"character"},{"id":"mother_race","name":"mother_race","type":"numeric"},{"id":"mother_age","name":"mother_age","type":"numeric"},{"id":"gestation_weeks","name":"gestation_weeks","type":"numeric"},{"id":"lmp","name":"lmp","type":"character"},{"id":"mother_married","name":"mother_married","type":"logical"},{"id":"mother_birth_state","name":"mother_birth_state","type":"character"},{"id":"cigarette_use","name":"cigarette_use","type":"logical"},{"id":"cigarettes_per_day","name":"cigarettes_per_day","type":"numeric"},{"id":"alcohol_use","name":"alcohol_use","type":"logical"},{"id":"drinks_per_week","name":"drinks_per_week","type":"numeric"},{"id":"weight_gain_pounds","name":"weight_gain_pounds","type":"numeric"},{"id":"born_alive_alive","name":"born_alive_alive","type":"numeric"},{"id":"born_alive_dead","name":"born_alive_dead","type":"numeric"},{"id":"born_dead","name":"born_dead","type":"numeric"},{"id":"ever_born","name":"ever_born","type":"numeric"},{"id":"father_race","name":"father_race","type":"numeric"},{"id":"father_age","name":"father_age","type":"numeric"},{"id":"record_weight","name":"record_weight","type":"numeric"}],"resizable":true,"nowrap":true,"dataKey":"f43128bdd846e2adb9e1eb210700dab4"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>차라리 출력하는 열 갯수를 줄이는 것이 비용을 많이 절약할 수 있습니다. R에서는 실제 sql 문구를 적용하기 전에는 데이터 양이 얼마나 될 지 미리 알 수가 없습니다. 따라서 빅쿼리 초보 사용자라면 <strong>구글 빅쿼리 콘솔에서 실제로 SQL 구문을 수정해 보면서 데이터 양을 비교</strong>해 보는 것을 추천합니다.</p>
<ol type="1">
<li>natality 테이블 모든 열을 조회하는 경우: 데이터 용량 21.94GB</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="natality_all.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2" data-glightbox="description: .lightbox-desc-2" title="모든 열 1000개 행 조회 시 용량"><img src="https://seheeopark.rbind.io/posts/bigquery-r/natality_all.png" class="img-fluid figure-img" alt="모든 열 1000개 행 조회 시 용량"></a></p>
<figcaption>모든 열 1000개 행 조회 시 용량</figcaption>
</figure>
</div>
<ol start="2" type="1">
<li>natality 테이블 중 3개 열에 한정하여 조회하는 경우: 데이터 용량 2.11GB (1/10 정도로 줄었습니다)</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="natality_3columns.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3" data-glightbox="description: .lightbox-desc-3" title="3개 열 1000개 행 조회 시 용량"><img src="https://seheeopark.rbind.io/posts/bigquery-r/natality_3columns.png" class="img-fluid figure-img" alt="3개 열 1000개 행 조회 시 용량"></a></p>
<figcaption>3개 열 1000개 행 조회 시 용량</figcaption>
</figure>
</div>
<ol start="3" type="1">
<li>natality 테이블 중 3개 열의 행 추출 수를 제한하지 않아도(LIMIT 1000 삭제) 데이터 용량은 2.11 GB로 동일합니다.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="natality_3columns_all.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4" data-glightbox="description: .lightbox-desc-4" title="3개 열 모든 행 조회 시 용량"><img src="https://seheeopark.rbind.io/posts/bigquery-r/natality_3columns_all.png" class="img-fluid figure-img" alt="3개 열 모든 행 조회 시 용량"></a></p>
<figcaption>3개 열 모든 행 조회 시 용량</figcaption>
</figure>
</div>
<hr>
<p>오늘은 R에서 빅쿼리 데이터에 접근해서 데이터를 다운로드하는 기초적인 방법을 알아 봤습니다. 다음 글에서는 필요한 열(column) 정보와 행(row) 정보를 선택할 수 있도록 SQL 코드를 R dplyr 패키지와 유사하게 구현할 수 있는 <code>dbplyr</code> 패키지를 활용해서 <strong>효율적인 빅쿼리 데이터 다운로드</strong> 방법에 관해 소개하겠습니다.</p>
<blockquote class="blockquote">
<p>빅쿼리에 저장된 GA4 데이터를 가장 효율적인 분석 언어 R로 추출해 보세요.</p>
</blockquote>



</section>
</section>

 ]]></description>
  <category>featured</category>
  <category>bigquery</category>
  <category>sql</category>
  <category>R</category>
  <guid>https://seheeopark.rbind.io/posts/bigquery-r/</guid>
  <pubDate>Sun, 25 Feb 2024 15:00:00 GMT</pubDate>
  <media:content url="https://seheeopark.rbind.io/posts/bigquery-r/bigquery-r-thumbnail.webp" medium="image" type="image/webp"/>
</item>
<item>
  <title>R Quarto로 만든 블로그 배포(feat. Netlify)</title>
  <dc:creator>박세희 </dc:creator>
  <link>https://seheeopark.rbind.io/posts/netlify-deployment/</link>
  <description><![CDATA[ 





<div class="{writing}">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://seheeopark.rbind.io/posts/netlify-deployment/hello_quarto.webp" class="img-fluid figure-img"></p>
<figcaption>Artwork by Allison Horst</figcaption>
</figure>
</div>
</div>
<hr>
<section id="먼저-참고하면-좋은-글" class="level2">
<h2 class="anchored" data-anchor-id="먼저-참고하면-좋은-글">먼저 참고하면 좋은 글</h2>
<p><a href="https://seheeopark.rbind.io/posts/quarto-blog/quarto-blog">R Quarto로 블로그 만들기</a></p>
<ul>
<li>Quarto로 하루 만에 블로그 만드는 방법이 궁금하다면?</li>
<li>GitHub와 Quarto 블로그 프로젝트를 연결하려면?</li>
</ul>
<hr>
</section>
<section id="netlify가-무엇이죠" class="level2">
<h2 class="anchored" data-anchor-id="netlify가-무엇이죠">Netlify가 무엇이죠?</h2>
<p><code>정적 웹사이트</code>를 호스팅하고 관리할 수 있는 <strong>무료</strong> 플랫폼 입니다. R 커뮤니티 뿐만 아니라 기술 블로그를 운영하는 다양한 개발자 커뮤니티에서 인기있는 서비스 입니다.<sup>1</sup> Quarto 블로그는 기본적으로 미리 <code>knit</code>을 통해 완성한 html을 서버로 전송하는 방식을 채택합니다. 따라서 웹 호스팅이 간편하고 빠르며 보안성이 높습니다.</p>
</section>
<section id="netlify-쉬운가요" class="level2">
<h2 class="anchored" data-anchor-id="netlify-쉬운가요">Netlify 쉬운가요?</h2>
<p>네!</p>
<p>다음과 같은 설정 1번만 해 두면, 블로그에 새 글을 추가하거나 변경하는 내용이 자동으로 배포됩니다. 이를 <strong>지속적 배포(continuous deployment)</strong> 라고 합니다. 이런 기술적 용어나 원리는 몰라도 됩니다. Netlify 서비스가 모든 것을 관리해 주니까요.</p>
<p>여러분이 할 일은 <strong>Quarto로 만든 블로그 작성 프로젝트를 깃헙에 연동</strong>한 뒤, <strong>Netlify에 해당 깃헙을 연결하는 설정 1번</strong>만 하는 것이에요.</p>
<p>해외 서비스라서 모든 기능이 영어로만 제공된다는 것이 조금 불편할 수 있지만, 구글 번역기 등을 활용해서 충분히</p>
</section>
<section id="깃헙---netlify-연결하기" class="level2">
<h2 class="anchored" data-anchor-id="깃헙---netlify-연결하기">깃헙 - Netlify 연결하기</h2>
<p>Quarto 블로그 프로젝트를 깃헙에 연결하는 방법은 이 블로그 포스팅 도입부에 소개한 <a href="https://seheeopark.rbind.io/posts/quarto-blog/quarto-blog">R Quarto로 블로그 만들기</a> 글을 참고해 주세요. 여기서는 깃헙 연동에 성공한 이후 Netlify 연결 방법에 관해 소개합니다.</p>
<section id="netlify-계정-만들기" class="level3">
<h3 class="anchored" data-anchor-id="netlify-계정-만들기">(1) Netlify 계정 만들기</h3>
<p><a href="https://www.netlify.com/">Netlify 바로가기</a></p>
<p>처음 시작하는 계정은 무료 입니다. 추후 블로그 방문자 트래픽이 커지면 비용이 발생할 수 있지만, 대부분의 개인 블로그 정도는 무료로 운영 가능합니다. 무료 계정 허용 용량 이상 트래픽은 로그인 후 제공하는 대시보드 형태 화면에서 확인 가능 합니다.</p>
<p>신규 계정 만들 때는 <strong>깃헙 계정을 연동하는 방식</strong>을 추천 합니다. 어차피 우리가 배포하려는 서비스가 깃헙에 등록되어 있기 때문에 다른 이메일 주소로 가입하더라도 깃헙 계정과 연동을 해야 하긴 합니다.</p>
</section>
<section id="깃헙-레포지토리-불러오기" class="level3">
<h3 class="anchored" data-anchor-id="깃헙-레포지토리-불러오기">(2) 깃헙 레포지토리 불러오기</h3>
<ul>
<li><p>로그인 후 보이는 화면에서 <code>Add new site</code> 클릭</p></li>
<li><p><code>Import an existing project</code> 선택</p></li>
<li><p><code>Deploy with GitHub</code> 선택</p></li>
<li><p>깃헙 계정과 연동 허용</p></li>
<li><p>Netlify에서 배포할 레포지토리를 선택</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="new_site_netlify.webp" class="lightbox" data-glightbox="description: .lightbox-desc-2" data-gallery="quarto-lightbox-gallery-2" title="등록할 깃헙 레포지토리 설정하는 방법"><img src="https://seheeopark.rbind.io/posts/netlify-deployment/new_site_netlify.webp" class="img-fluid figure-img" alt="등록할 깃헙 레포지토리 설정하는 방법"></a></p>
<figcaption>등록할 깃헙 레포지토리 설정하는 방법</figcaption>
</figure>
</div>
</section>
<section id="사이트-이름-지정" class="level3">
<h3 class="anchored" data-anchor-id="사이트-이름-지정">(3) 사이트 이름 지정</h3>
<ul>
<li><p>기본적으로 xxxx.netlify.app 이라는 홈페이지 주소가 자동 부여됩니다.</p></li>
<li><p>Site name에 내가 원하는 서브 도메인 이름을 <strong>영어</strong>로 작성하여 사용 가능 여부를 확인 합니다.</p>
<ul>
<li>이 단계에서 놓쳐도 설정에서 변경할 수 있어요.</li>
</ul></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="site_name.webp" class="lightbox" data-glightbox="description: .lightbox-desc-3" data-gallery="quarto-lightbox-gallery-3" title="사이트명 설정하기"><img src="https://seheeopark.rbind.io/posts/netlify-deployment/site_name.webp" class="img-fluid figure-img" alt="사이트명 설정하기"></a></p>
<figcaption>사이트명 설정하기</figcaption>
</figure>
</div>
</section>
<section id="가장-중요-배포-폴더-지정" class="level3">
<h3 class="anchored" data-anchor-id="가장-중요-배포-폴더-지정">(4) (가장 중요) 배포 폴더 지정</h3>
<ul>
<li><p>Build settings &gt; Publish directory 에서 <code>_site</code> 라고 입력합니다.</p>
<ul>
<li>이 옵션은 Quarto 블로그 프로젝트를 생성했다면 공통 적용 입니다.</li>
</ul></li>
<li><p>다른 것은 수정하거나 추가하지 마세요.</p></li>
<li><p>Deploy XXX (배포할 레포지토리 이름) 버튼 클릭하세요</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="public_directory.webp" class="lightbox" data-glightbox="description: .lightbox-desc-4" data-gallery="quarto-lightbox-gallery-4" title="_site 라고 입력하기"><img src="https://seheeopark.rbind.io/posts/netlify-deployment/public_directory.webp" class="img-fluid figure-img" alt="_site 라고 입력하기"></a></p>
<figcaption>_site 라고 입력하기</figcaption>
</figure>
</div>
<p>여기까지 5분 정도 걸리셨나요? 모든 설정이 끝났어요. 진짜로요.</p>
</section>
</section>
<section id="이제-블로그-쓰기만-하세요" class="level2">
<h2 class="anchored" data-anchor-id="이제-블로그-쓰기만-하세요">이제 블로그 쓰기만 하세요</h2>
<p>지금 여러분이 보고 있는 <code>Mindful Analytics</code> 블로그도 바로 Quarto-GitHub-Netlify 조합으로 만들고 배포 하였습니다. 이 연동 설정은 1회만 하면 됩니다. 앞으로는 Quarto로 추가 포스팅 작성 후 GitHub로 커밋 &amp; 푸쉬만 하면 Netlify가 해당 변경 내용을 실시간으로 받아서 웹사이트를 상시 업데이트 해 줍니다. 변경에 대한 배포에 대해 고민할 필요가 없는 것이 Netlify를 쓰는 가장 큰 장점 이에요.</p>
<section id="보너스-연동-후-새로운-글-배포하는-방법" class="level3">
<h3 class="anchored" data-anchor-id="보너스-연동-후-새로운-글-배포하는-방법">(보너스) 연동 후 새로운 글 배포하는 방법</h3>
<ul>
<li><p>posts 폴더 안에 새로운 블로그 글을 작성할 폴더를 만듭니다.</p>
<ul>
<li><p>작성할 포스트 제목을 나타내는 키워드를 영어로 골라서 폴더명을 쓰세요.</p></li>
<li><p>예를 들어, 제가 작성 중인 이 포스트는 netlify-deployment 폴더 안에 있습니다.</p></li>
<li><p>이 폴더 이름이 블로그 글 주소에 들어가게 됩니다.</p></li>
</ul></li>
<li><p>새로 만든 폴더 안에 .qmd 파일을 생성하고 블로그 템플릿을 참고하여 새 글을 작성합니다.</p>
<ul>
<li>추가할 그림이나 데이터는 이 폴더 안에 함께 담아 주면 별도 경로 지정할 필요가 없어요.</li>
</ul></li>
<li><p>글 작성 후 웹 등록하려면 다음 2가지를 꼭 기억하세요.</p>
<ul>
<li><p>블로그 .qmd의 yaml 헤더에 <code>draft: false</code> 인지 꼭 확인하세요 (삭제하면 더 좋아요)</p></li>
<li><p>다 작성한 뒤 반드시 <code>Render</code>를 해서 html 파일을 생성합니다. 변경 사항 저장 시 자동 Render 되도록 <code>Render on Save</code> 옵션을 활성화하면 편리합니다.</p></li>
<li><p>_site 폴더 안에 내가 만든 포스팅 폴더가 추가 되었는지 확인하세요</p></li>
</ul></li>
<li><p>깃헙에 변경된 내용을 커밋 &amp; 푸쉬하는 것 잊지 마세요.</p></li>
</ul>
<hr>
<p>여러분도 R로 쓰는 블로그, Quarto-GitHub-Netlify 조합으로 쉽고 빠르게 만들어 나가시길 바랍니다.</p>



</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>정적 웹사이트란 미리 웹 페이지 내용이 생성되어 서버에서 사용자 요청에 따라 생성되거나 처리되는 컨텐츠가 없는 사이트 입니다.↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>featured</category>
  <category>git</category>
  <category>quarto</category>
  <category>netlify</category>
  <guid>https://seheeopark.rbind.io/posts/netlify-deployment/</guid>
  <pubDate>Fri, 23 Feb 2024 15:00:00 GMT</pubDate>
</item>
<item>
  <title>R Quarto로 만드는 블로그</title>
  <dc:creator>박세희 </dc:creator>
  <link>https://seheeopark.rbind.io/posts/quarto-blog/</link>
  <description><![CDATA[ 





<div class="{writing}">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://seheeopark.rbind.io/posts/quarto-blog/writing.webp" class="img-fluid figure-img"></p>
<figcaption>Artwork by Allison Horst</figcaption>
</figure>
</div>
</div>
<section id="배경" class="level2">
<h2 class="anchored" data-anchor-id="배경">배경</h2>
<p>제가 논문을 blogdown을 포함하는 bookdown으로 쓰게 된 건, R을 기반으로 한 데이터 분석 결과를 매번 업데이트 하는 과정에서 자잘한 변경을 모두 트래킹 하기 어려웠기 때문입니다. <strong>재현 가능한 연구(reproducible research)</strong> 를 위해서라도 R로 논문을 쓰는 게 필요했고, 당시 블로그를 시작할까 도전하면서 며칠을 낑낑 댔던 기억이 나네요.</p>
<p>이후 등장한 distill은 블로그에 최적화된 간결한 기능을 사용자 친화적인 함수로 제공하여 훨씬 간편해졌어요. distill은 인용, 각주 등이 잘 구현되어 있다는 점, 그리고 css를 잘 몰라도 기본적인 구성은 아주 쉽게 구현할 수 있다는 강점을 갖고 있습니다.</p>
<p>Distill의 기능을 대부분 포괄하면서 가장 최근에 나온 Quarto Blog 툴은 자바스크립트(JS) 기반 부트스트랩5을 탑재하고 있어 개인화 작업이 손 쉬워 졌습니다.</p>
</section>
<section id="r로-블로그-만드는-3가지-방법" class="level2">
<h2 class="anchored" data-anchor-id="r로-블로그-만드는-3가지-방법">R로 블로그 만드는 3가지 방법</h2>
<ul>
<li><code>blogdown</code> (2017 ~ ): R로 작성하는 html 기초 문법 제공
<ul>
<li>bookdown 패키지의 서브 버전으로 기본 문법을 이해하면 다른 패키지나 시스템 이해도가 크게 높아집니다.<br>
</li>
<li>온라인 ebook은 무료로 제공 되고 있습니다.<br>
</li>
<li>패키지 저자 Yihui Xie의 <a href="https://bookdown.org/yihui/blogdown/">공식 가이드북</a>을 추천합니다.</li>
</ul></li>
<li><code>distill</code> (2018 ~ ): 블로그에 최적화된 레이아웃 제공
<ul>
<li>과학 블로그, 기술 블로그에 최적화된 웹출판 도구로 패발된 패키지 입니다.<br>
</li>
<li>수학식, 인용, 각주 등을 손쉽게 사용할 수 있도록 편의성을 제공합니다.<br>
</li>
<li>각종 편의 기능을 제공하는 함수로 블로그 포스팅을 쉽고 빠르게 할 수 있어요.<br>
</li>
<li>quarto 블로그 시스템에 distill을 차용하고 있기 때문에 레퍼런스로 활용할 만 합니다.<br>
</li>
<li>공식 홈페이지는 <a href="https://rstudio.github.io/distill/">여기</a> 참고하세요.</li>
</ul></li>
<li><code>quarto</code> (2022 ~ ): 패키지가 아닌 문서 작성 도구 distill 기능을 대부분 계승합니다.
<ul>
<li>Quarto는 Posit에서 공식 개발, 확장 중인 시스템으로 빠르게 기능이 확장 되고 있습니다.</li>
<li>R 생태계를 파이썬과 연결하려는 시스템 입니다.</li>
<li>RStudio 외에 쥬피터노트북, VS Code에서도 사용할 수 있어요.</li>
</ul></li>
</ul>
</section>
<section id="quarto-장점" class="level2">
<h2 class="anchored" data-anchor-id="quarto-장점">Quarto 장점</h2>
<ul>
<li>R 패키지가 아닌 문서 작성 시스템 입니다.
<ul>
<li>R 이외 파이썬 언어로도 작성 가능합니다.</li>
</ul></li>
<li>블로그, 홈페이지, MS워드, PDF, ePub 등 다양한 문서 작성을 지원합니다.</li>
<li>Quarto -&gt; Github -&gt; 제3자 퍼블리싱 연계가 쉽습니다.</li>
</ul>
</section>
<section id="quarto-단점" class="level2">
<h2 class="anchored" data-anchor-id="quarto-단점">Quarto 단점</h2>
<ul>
<li>개인화 하려면 배워야 할 게 많습니다.
<ul>
<li>R마크다운, yaml, html, css, JS는 기본적으로 이해할 필요가 있어요.</li>
<li>git에 대한 기본 이해도 필요해요.</li>
<li>Netlify 같은 호스팅 서비스도 필요해요.</li>
</ul></li>
<li>패키지가 아니라서 클릭 한 번으로 블로그 포스팅 템플릿이 자동 생성되지 않습니다.
<ul>
<li>블로그 포스팅 마다 폴더를 만들고, 그 안에 Rmd(R마크다운) 파일을 개별 생성해야 합니다.</li>
</ul></li>
</ul>
</section>
<section id="어떻게-시작하나요" class="level2">
<h2 class="anchored" data-anchor-id="어떻게-시작하나요">어떻게 시작하나요?</h2>
<section id="quarto-설치" class="level3">
<h3 class="anchored" data-anchor-id="quarto-설치">Quarto 설치</h3>
<p><a href="https://quarto.org">Posit 홈페이지</a>에서 사용하는 OS 시스템에 맞는 버전을 <a href="https://quarto.org/docs/download/">다운로드</a> 후 설치 합니다. 2024-02-15 1.4.550 버전이 출시 되었습니다.</p>
</section>
<section id="quarto-blog-프로젝트-만들기" class="level3">
<h3 class="anchored" data-anchor-id="quarto-blog-프로젝트-만들기">Quarto Blog 프로젝트 만들기</h3>
<p>가장 쉬운 방법은 RStudio에서 신규 프로젝트를 생성할 때, <strong>Quarto Blog</strong>를 선택하는 겁니다. 프로젝트에서 자동으로 기본 뼈대 구성에 필요한 폴더들과 파일을 만들어 줍니다. 일단은 개인화는 나중에 생각하고, 해당 템플릿을 활용해서 <code>index.Rmd</code>를 나의 블로그 포스팅으로 수정하기만 해도 블로그를 시작하는 거죠.</p>
<p>여기까지 얼마나 걸릴까요? 블로그 포스팅 소재만 준비되어 있다면 하루도 안 걸립니다.</p>
</section>
<section id="github-연동하기" class="level3">
<h3 class="anchored" data-anchor-id="github-연동하기">Github 연동하기</h3>
<p>git에 대해 잘 모르거나 github를 써 보지 않았다면 처음에 조금 헤맬 수 있어요. 관련된 포스팅은 다음 기회에 자세히 하기로 하구요, 초보를 위한 <code>usethis</code> 패키지를 활용할께요.</p>
<section id="깃헙-계정-만들기" class="level4">
<h4 class="anchored" data-anchor-id="깃헙-계정-만들기">(1) 깃헙 계정 만들기</h4>
<p><a href="https://github.com">GitHub</a> 계정이 없다면 이번 기회에 만듭니다.</p>
</section>
<section id="usethis-패키지-설치" class="level4">
<h4 class="anchored" data-anchor-id="usethis-패키지-설치">(2) usethis 패키지 설치</h4>
<p><code>usethis</code> 패키지를 설치 하고 불러 옵니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#install.packages("usethis")</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(usethis) </span></code></pre></div>
</div>
</section>
<section id="깃헙-계정과-rstudio-연결" class="level4">
<h4 class="anchored" data-anchor-id="깃헙-계정과-rstudio-연결">(3) 깃헙 계정과 RStudio 연결</h4>
<p><a href="https://happygitwithr.com">Happy Git and GibHub for the useR</a>을 참조하시면 왠만한 건 다 해결 될 거에요.</p>
<p>우리가 참고할 부분은 <a href="https://happygitwithr.com/existing-github-last">17 Existing project, Github last</a>입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">usethis<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">use_git</span>()</span></code></pre></div>
</div>
</section>
<section id="깃-패널-확인" class="level4">
<h4 class="anchored" data-anchor-id="깃-패널-확인">(4) 깃 패널 확인</h4>
<p>위 명령을 실행하면 RStudio 우측 상단 Environment가 있는 패널에 ’Git’이라는 패널이 새로 생길 거에요.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="git_panel.webp" class="lightbox" data-gallery="quarto-lightbox-gallery-2" data-glightbox="description: .lightbox-desc-2" title="Git 패널이 생기면 성공"><img src="https://seheeopark.rbind.io/posts/quarto-blog/git_panel.webp" class="img-fluid figure-img" alt="Git 패널이 생기면 성공"></a></p>
<figcaption>Git 패널이 생기면 성공</figcaption>
</figure>
</div>
</section>
<section id="깃헙-연결하는-개인화토큰pat-만들기" class="level4">
<h4 class="anchored" data-anchor-id="깃헙-연결하는-개인화토큰pat-만들기">(5) 깃헙 연결하는 개인화토큰(PAT) 만들기</h4>
<p>다음 명령을 실행하면 깃헙 내 계정으로 로그인하는 창이 브라우저에 뜹니다. 브라우저에서 로그인 하면 PAT 만드는 페이지로 바로 접속 됩니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">create_github_token</span>()</span></code></pre></div>
</div>
<p>Note 빈 칸에 적당한 이름을 만들어서 저장합니다. 다음 페이지에서 <strong>창을 절대 닫지 마시고</strong> 생성된 PAT를 복사하세요.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="github_PAT.webp" class="lightbox" data-gallery="quarto-lightbox-gallery-3" data-glightbox="description: .lightbox-desc-3" title="PAT만드는 깃헙페이지로 연결됩니다"><img src="https://seheeopark.rbind.io/posts/quarto-blog/github_PAT.webp" class="img-fluid figure-img" alt="PAT만드는 깃헙페이지로 연결됩니다"></a></p>
<figcaption>PAT만드는 깃헙페이지로 연결됩니다</figcaption>
</figure>
</div>
<p>다음 코드를 실행해서 시스템에 생성한 PAT를 저장합니다. 저는 이미 PAT가 저장되어 있기 때문에, 다음과 같이 기존 코드를 바꾸냐는 옵션이 있는 점 참고해 주세요.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">gitcreds<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gitcreds_set</span>()</span></code></pre></div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="gitcred_set.webp" class="lightbox" data-gallery="quarto-lightbox-gallery-4" data-glightbox="description: .lightbox-desc-4" title="콘솔에서 옵션을 선택해서 저장"><img src="https://seheeopark.rbind.io/posts/quarto-blog/gitcred_set.webp" class="img-fluid figure-img" alt="콘솔에서 옵션을 선택해서 저장"></a></p>
<figcaption>콘솔에서 옵션을 선택해서 저장</figcaption>
</figure>
</div>
</section>
<section id="깃헙에-블로그-레포지토리-생성" class="level4">
<h4 class="anchored" data-anchor-id="깃헙에-블로그-레포지토리-생성">(6) 깃헙에 블로그 레포지토리 생성</h4>
<p>다음 코드를 실행해서 깃헙에 프로젝트 이름으로 새로운 레포지토리를 생성합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">use_github</span>() </span></code></pre></div>
</div>
<p>깃헙 홈페이지에서 새로 만들어진 레포지토리를 확인 합니다. 아직은 비어 있을 거에요.</p>
</section>
<section id="첫-커밋을-실행" class="level4">
<h4 class="anchored" data-anchor-id="첫-커밋을-실행">(7) 첫 커밋을 실행</h4>
<p>(4)번에서 본 Git 패널로 다시 갑니다. 아직 git에 연동되지 않은 파일 리스트가 있을 겁니다. 다음과 같이 실행하세요.</p>
<ul>
<li><code>Diff</code> 아이콘을 열고, 모두 선택해서(staged)<br>
</li>
<li>커밋 메세지를 적어요
<ul>
<li>나중에 변경 이력 관리하기 위해서 어떤 내용 변경인지 요약한다고 생각하면 됩니다.<br>
</li>
</ul></li>
<li><code>commit</code> 버튼 클릭<br>
</li>
<li><code>push</code> 버튼 클릭</li>
</ul>
<p>간혹 <code>push</code> 버튼이 활성화 되지 않을 경우가 있어요. 그럴 때는 Terminal로 이동해서 직접 git 연동을 시켜 줍니다.</p>
<div class="cell">
<pre class="shell cell-code"><code>git push origin main</code></pre>
</div>
</section>
<section id="깃헙-홈페이지-확인" class="level4">
<h4 class="anchored" data-anchor-id="깃헙-홈페이지-확인">(8) 깃헙 홈페이지 확인</h4>
<p>제대로 업로드가 되었는지 깃헙 홈페이지에 레포지토리를 확인하세요.</p>
<hr>
</section>
</section>
</section>
<section id="사용-소감" class="level2">
<h2 class="anchored" data-anchor-id="사용-소감">사용 소감</h2>
<p>글이 너무 길어져서… 웹에 배포하는 Netlify 연동은 다음 포스팅에서 다룰께요.</p>
<p><a href="https://mindfulanalytics.netlify.app/posts/netlify-deployment/netlify-deployment">Netlify 연동방법 글 바로가기</a></p>
<p>Quarto 설치 후 첫 블로그 포스팅 까지 딱 하루가 걸렸어요. 물론 저는 R 사용에 능숙하고 기존에 blogdown, distill 썼던 경험이 있어서 수월 했을 수도 있다고 생각합니다. 그럼에도 Quarto가 워낙 사용하기 쉽기 때문에 개발자가 아니어도 누구나 R을 활용한 블로그를 개설할 수 있습니다. Wordpress 블로그 개설이 너무 어려웠다면, Quarto를 찬찬히 따라해 보는 것 추천합니다. 여러분도 할 수 있어요.</p>



</section>

 ]]></description>
  <category>featured</category>
  <category>git</category>
  <category>quarto</category>
  <category>R</category>
  <guid>https://seheeopark.rbind.io/posts/quarto-blog/</guid>
  <pubDate>Thu, 22 Feb 2024 15:00:00 GMT</pubDate>
</item>
</channel>
</rss>
